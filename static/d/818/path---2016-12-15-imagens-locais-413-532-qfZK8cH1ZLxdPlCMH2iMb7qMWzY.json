{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"fab9c8ad-c96a-5506-93f3-866af4831dbe","html":"<p>Sei que estou postando muito sobre o <a href=\"https://jekyllrb.com\">Jekyll</a> e pouco sobre o jogo em si, mas ele me ajudou tanto a resolver o formato e a infra do blog que resolvi postar sobre ele também. Afinal estou perdendo um tempo considerável nisso e é bom relatar de qualquer maneira. Hoje resolvi colocar as imagens do site localmente. Por que?</p>\n<!--more-->\n<h2>Antes: Usando Puush e ShareX</h2>\n<p>Estava hospedando as imagens no <a href=\"https://puush.me\">Puush</a>. Primeiro porque é muito simples escrever markdown com imagens externas, a tag é como um link, fácil e intuitiva:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">![](link-para-a-imagem)</code></pre>\n      </div>\n<p>Enquanto estou fazendo o jogo, aperto <code class=\"language-text\">CTRL+SHIFT+4</code> me traz o <a href=\"https://getsharex.com\">ShareX</a> e um cursor para selecionar parte da tela que quero transformar em imagem. Depois que selecionei (ou só dei um click simples para capturar a janela toda) ele envia automaticamente pro serviço que escolhi. O serviço é o Puush nesse caso. Assim que a imagen é enviada, ele me traz um link na área de transferencia e aí era só dar <code class=\"language-text\">CTRL+v</code> na tag acima.</p>\n<h2>Por que mudei?</h2>\n<p>Isso serve bastante para coisas que você não vai precisar depois de 1 mês, já que essa é a duração das imagens nesse serviço - <strong>e isso eu não sabia</strong>!</p>\n<p>Resolvi então procurar por outro serviço onde as imagens não morriam depois de 1 mês, mas percebi que isso faria que as imagens ficariam fora do meu repositório / infra de qualquer maneira e caso o serviço deixasse de existir por algum motivo, eu não teria mais as imagens. O principal desse projeto é documentar o desenvolvimento desse jogo e uma documentação sem informação suficiente acabaria ficando incompleta, obviamente.</p>\n<h2>Prevendo a solução</h2>\n<p>Então decidi que as imagens ficariam localmente. Para inserir uma imagem localmente, seria tão simples quanto uma externa:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\">\n      <pre class=\"language-markdown\"><code class=\"language-markdown\">![]({{ site.url }}/assets/imagem.ext)</code></pre>\n      </div>\n<p>Porém esse formato iria ficar velho logo. Imagine esse diretório cheio de imagens sem nenhuma organização… seria um horror! Então decidi organizar o diretório por ano e mês, assim saberia pelo menos uma referencia sobre onde buscar a imagen mais tarde caso necessário. As imagens então ficam em <code class=\"language-text\">/assets/posts/ANO/MÊS</code>.</p>\n<h2>Entra o include</h2>\n<p>Em uma busca rápida pelo google encontrei <a href=\"https://eduardoboucas.com/blog/2014/12/07/including-and-managing-images-in-jekyll.html\">esse post</a> de um blog feito em Jekyll. Achei a solução bem simples e elegante (<a href=\"https://eduardoboucas.com/blog/2014/12/07/including-and-managing-images-in-jekyll.html#comment8\">obrigado Eduardo Boucas!</a>), então resolvi aplicar aqui. Alterei a solução dele para ter apenas ano e mês no caminho pra imagem e voilà! Agora, para incluir uma imagem, ao invés da tag anterior eu uso:</p>\n<div class=\"gatsby-highlight\" data-language=\"liquid\">\n      <pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">raw</span> <span class=\"token operator\">%</span>}\n{<span class=\"token operator\">%</span> <span class=\"token function\">include</span> image name<span class=\"token operator\">=</span>\"NOME<span class=\"token operator\">-</span>DA<span class=\"token operator\">-</span>IMAGEM.png\" <span class=\"token operator\">%</span>}\n{<span class=\"token operator\">%</span> <span class=\"token keyword\">endraw</span> <span class=\"token operator\">%</span>}</code></pre>\n      </div>\n<h2>Pequenos problemas</h2>\n<p>Isso resolveu a questão rapidamente, porém para os layouts funcionarem foi outra questão. Lá eu tive que manualmente construir o link. Acredito que no layout do post não teria problema, mas no <code class=\"language-text\">index.html</code>, como uso o <a href=\"https://jekyllrb.com/docs/pagination\">Jekyll Pagination</a>, ele não funcionava bem, não conseguindo traduzir as variáveis <code class=\"language-text\">post.date</code> / <code class=\"language-text\">page.date</code> direito. Então foi só uma questão de ajustar diretamente:</p>\n<div class=\"gatsby-highlight\" data-language=\"liquid\">\n      <pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">raw</span> <span class=\"token operator\">%</span>}\n{<span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> post.featured <span class=\"token operator\">%</span>}\n<span class=\"token operator\">&lt;</span>div class<span class=\"token operator\">=</span>\"list<span class=\"token operator\">-</span>post<span class=\"token operator\">-</span>featured\"<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span>\"{{ site.url }}<span class=\"token operator\">/</span>assets<span class=\"token operator\">/</span>posts<span class=\"token operator\">/</span>{{ post.date <span class=\"token operator\">|</span> <span class=\"token function\">date</span><span class=\"token operator\">:</span> '<span class=\"token operator\">%</span>Y<span class=\"token operator\">/</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span>m' }}<span class=\"token operator\">/</span>{{ post.featured }}\" alt<span class=\"token operator\">=</span>\"Destaque<span class=\"token operator\">:</span> {{ post.title }}\"<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n{<span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span>}\n{<span class=\"token operator\">%</span> <span class=\"token keyword\">endraw</span> <span class=\"token operator\">%</span>}</code></pre>\n      </div>\n<p>E agora, no <a href=\"https://jekyllrb.com/docs/frontmatter\">Front Matter</a>, eu só coloco o nome da imagem que será a imagem de destaque na postagem. Simples e bem interessante!</p>","frontmatter":{"title":"Imagens locais","date":null}}},"pageContext":{"slug":"/2016-12-15-imagens-locais/","previous":{"fields":{"slug":"/2016-12-21-tabela-cores-padrao/"},"frontmatter":{"title":"Tabela de cores padrão"}},"next":{"fields":{"slug":"/2016-12-13-migrado-para-jekyll-github-pages/"},"frontmatter":{"title":"Migrado para o Jekyll e Github Pages"}}}}